### 4.27.审批单据

输入：1
输出：8
查询：8
逻辑文件：7
对外接口：0
功能点测量总数：（4*1+5*8+4*8+10*7+7*0）*（0.65+0.01*49）=166

| 编号         | 需求描述与度量                                  |
| ---------- | ---------------------------------------- |
| Audit.Show | 当用户请求审批单据的时候，系统应按照提交顺序列表显示出所有处于等待审批状态的单据（**输出**） |

| 编号                                   | 需求描述与度量                                  |
| ------------------------------------ | ---------------------------------------- |
| Audit.Multipass                      | 当用户需要批量审批单据时，系统应该允许用户进行鼠标点击操作，参见Audit.Multipass.Choose |
| Audit.Multipass.Choose               | 当用户勾选某个复选框时，系统记录选择的单据（**逻辑文件**）          |
| Audit.Multipass.Choose.Checkall      | 当用户全选单据（**查询**）时，系统选中所有单据，显示勾选所有的复选框（**逻辑文件**） |
| Audit.Multipass.Choose.Cancel        | 当用户取消选择的多个单据时，系统撤销选中的复选框（**逻辑文件**）       |
| Audit.Multipass.Submit               | 当用户选择多个单据并通过审批时（**查询**）时，系统弹出窗口询问是否全部通过审批（**输出**） |
| Audit.Multipass.Submit.Confirmed     | 用户确认通过（**查询**），系统弹出窗口提示已通过审批（**输出**），将单据状态设置为已入账，根据单据内容修改库存数据和客户应收应付数据（**逻辑文件**），用户确认该提示信息后系统回到单据审批页面 |
| Audit.Multipass.Submit.Confirmed.Log | 当用户批量审批成功时，系统应在操作日志记录批量审批操作（逻辑文件）        |
| Audit.Multipass.Submit.Cancel        | 当用户放弃确认通过审批时，系统应回到单据审批界面                 |

| 编号                                  | 需求描述与度量                                  |
| ----------------------------------- | ---------------------------------------- |
| Audit.Inspect                       | 当用户查看某张单据（**查询**）时，系统应弹出窗口显示该单据的全部内容（**输出**） |
| Audit.Inspect.Back                  | 当用户查看完单据详细信息退出时，系统关闭单据详情界面，回到单据审批界面      |
| Audit.Inspect.Pass                  | 当用户通过该单据审批（**查询**）时，系统弹出窗口提示已通过审批（**输出**），将单据状态设置为已入账，根据单据内容修改库存数据和客户应收应付数据（**逻辑文件**），用户确认该提示信息后系统回到单据审批页面 |
| Audit.Inspect.Log                   | 无论用户通过审批还是拒绝通过审批，系统都应记录相应的操作日志（**逻辑文件**） |
| Audit.Inspect.Rejuct                | 当用户拒绝通过某单据的审批（**查询**）时，系统弹出窗口要求用户填写拒绝通过的理由（**输出**） |
| Audit.Inspect.Rejuct.Reason         | 当用户填写完拒绝通过的理由（**输入**）并点击提交（**查询**）时，系统弹出窗口询问是否确认提交（**输出**） |
| Audit.Inspect.Rejuct.Reason.Confirm | 当用户再次确认时，系统将单据状态设置为未通过审批（**逻辑文件**），并弹出窗口提示已发送消息给相关人员（**输出**），用户确认该提示信息后系统应回到单据审批界面 |
| Audit.Inspect.Rejuct.Reason.Cancel  | 当用户选择放弃（**查询**）时，系统应回到填写拒绝通过理由界面         |




### 4.28.制定促销策略

输入：2
输出：14
查询：24
逻辑文件：6
对外接口：0
功能点测量总数：（4*2+5*14+4*24+10*6+7*0）*（0.65+0.01*49）=266

| 编号                    | 需求描述与度量                                  |
| --------------------- | ---------------------------------------- |
| Promotion.Show        | 当用户需要制定促销策略时，系统显示6种不同的促销策略（**输出**）       |
| Promotion.Show.Choose | 当用户选择其中一种促销策略进行制定（**查询**）时，系统显示相应界面（组合商品降价、满额赠送礼品、客户赠送礼品策略）或要求填写相应策略信息（满额赠代金券需要填写额度、代金券面值、开始日期和结束日期；客户赠代金券需要填写客户级别、代金券面值、开始日期和结束日期；客户价格折让需要填写客户级别、购买总额、折让价格、开始日期和结束日期）（**输出**） |

| 编号                                   | 需求描述与度量                                  |
| ------------------------------------ | ---------------------------------------- |
| Promotion.View                       | 当用户点击查看保存的促销策略（**查询**）时，系统按照最后一次修改时间列表显示所有促销策略简要信息（**输出**） |
| Promotion.View.Select                | 当用户选择某一个促销策略进行查看（**查询**）时，系统显示促销策略详细信息（**输出**） |
| Promotion.View.Select.Modify.Valid   | 当用户选择修改等待生效的促销策略（**查询**）时，系统弹出促销策略信息填写页面，并显示保存的信息（**输出**），参见Promotion.Input.Condition.Submit |
| Promotion.View.Select.Modify.Invalid | 当用户选择修改已经生效或者过期的促销策略（**查询**）时，系统弹出窗口警告用户“该促销策略无法修改”（**输出**） |
| Promotion.View.Select.Delete.Valid   | 当用户选择删除等待生效或已过期的促销策略（**查询**）时，系统提出窗口询问是否确认删除（**输出**），参见Promotion.Delete |
| Promotion.View.Select.Delete.Invalid | 当用户选择删除正在生效的促销策略（**查询**）时，系统弹出窗口警告用户该促销策略无法删除（**输出**） |
| Promotion.View.Filtrate              | 当用户输入关键字（**输入**）进行促销策略搜索（**查询**）时，系统按照最后一次修改时间列表显示所有符合条件的促销策略（输出） |

| 编号                               | 需求描述与度量                                  |
| -------------------------------- | ---------------------------------------- |
| Promotion.Input                  | 当用户制定促销策略时，系统应当允许用户进行鼠标点击和键盘输入           |
| Promotion.Input.Product.Valid    | 当用户输入目录中存在的商品标识时，系统应显示商品信息（商品标识、描述和价格）   |
| Promotion.Input.Product.Invalid  | 当用户输入其他标识时，系统应弹出窗口警告用户商品标识格式不正确          |
| Promotion.Input.Condition        | 当用户完成商品选择（**查询**）时，系统弹出窗口要求填写相应的策略信息（组合商品降价需要填写降价金额、开始日期和结束日期；满额赠品需要填写额度、赠品标识、开始时间和结束时间；客户赠品需要填写客户级别、赠品标识、开始时间和结束时间）（**输出**） |
| Promotion.Input.Condition.Cancel | 当用户放弃当前填写的策略信息时（**查询**），系统应弹出窗口询问是否保存草稿（**输出**），参见Promotion.Cancel |
| Promotion.Input.Condition.Submit | 当用户完成促销策略信息的填写（**输入**），需要提交时，参见Promotion.Submit |

| 编号                             | 需求描述与度量                                  |
| ------------------------------ | ---------------------------------------- |
| Promotionl.Cancel.Backup       | 当用户选择保存草稿时（**查询**），系统应保存当前促销策略内容（**逻辑文件**），并返回制定促销策略主界面 |
| Promotion.Cancel.Backup.Failed | 如果系统保存失败，应弹出窗口提示用户保存草稿失败，并显示具体原因（**输出**）。用户确认后，应保留信息，退回填写促销策略信息页面 |
| Promotion.Cancel.Backup.Log    | 当用户确认保存草稿时，无论操作是否成功，系统都应记录日志（**逻辑文件**）   |
| Promotion.Cancel.NoBackup      | 当用户选择不保存草稿时（**查询**），系统应丢弃当前促销策略信息，并返回制定促销策略主界面 |
| Promotion.Cancel.Back          | 当用户取消放弃当前的促销策略信息操作时（**查询**），系统应回到填写促销策略信息页面。 |

| 编号                                     | 需求描述与度量                                  |
| -------------------------------------- | ---------------------------------------- |
| Promotion.Submit.Review                | 当用户提交促销策略信息（**查询**）时，系统给出当前单据的总览（**输出**）让用户复查 |
| Promotion.Submit.Confirmed.Success     | 当用户确认无误（**查询**）时，若系统判断当前促销策略与已有促销策略无冲突（**逻辑文件**），则记录促销策略信息，提出窗口通知用户促销策略制定成功 |
| Promotion.Submit.Confirm.Failure       | 当用户确认无误（**查询**）时，若系统判断当前促销策略与已有促销策略存在冲突（**逻辑文件**），则提出窗口警告用户促销策略存在冲突（**输出**），用户确认该警告后返回促销策略信息填写界面 |
| Promotion.Submit.Confirmed.Success.Log | 当用户提交制定的促销策略成功时，系统记录当前操作在日志中（**逻辑文件**）   |
| Promotion.Submit.Back                  | 当用户需要返回做修改时（**查询**），系统应返回促销策略信息填写页面      |

| 编号                         | 需求描述与度量                                  |
| -------------------------- | ---------------------------------------- |
| Promotion.Reset            | 当用户点击复位按钮的时候（**查询**），系统应弹出窗口询问用户是否要复位全部信息（**输出**）。 |
| Promotionl.Reset.Confirmed | 当用户确认复位填写的促销策略信息时（**查询**），系统应复位当前信息      |
| Promotion.Reset.Back       | 当用户点击返回按钮的时候（**查询**），系统应返回到促销策略信息填写页面让用户继续填写。 |

| 编号             | 需求描述与度量                          |
| -------------- | -------------------------------- |
| Promotion.Undo | 用户按下回撤快捷键（**查询**）时，系统应撤回用户刚才做的修改 |

| 编号             | 需求描述与度量                          |
| -------------- | -------------------------------- |
| Promotion.Redo | 用户按下重做快捷键（**查询**）时，系统应重做用户刚才做的修改 |

| 编号                         | 需求描述与度量                                  |
| -------------------------- | ---------------------------------------- |
| Promotion.Delete.Confirmed | 当用户确认删除促销策略（**查询**）时，系统丢弃该促销策略的信息，将状态设置为已废弃，并在日志中记录删除操作（**逻辑文件**） |
| Promotion.Delete.Cancel    | 当用户取消删除一个等待生效的促销策略的操作（**查询**）时，系统返回到该促销策略的详情页面 |




### 4.29.查看日志

输入：1
输出：4
查询：2
逻辑文件：2
对外接口：0
功能点测量总数：（4*1+5*4+4*2+10*2+7*0）*（0.65+0.01*49）=59

| 编号           | 需求描述与度量                                  |
| ------------ | ---------------------------------------- |
| Viewlog.Show | 当用户查看主要操作日志（**查询**）时，系统按照操作时间列表显示主要操作的简要信息（包括时间、操作人员、具体操作）（**输出**） |

| 编号                             | 需求描述与度量                                  |
| ------------------------------ | ---------------------------------------- |
| Viewlog.Filtrate               | 当用户需要查询特定日志时，系统给出需要填写的筛选条件（时间、操作人员、具体操作名称） |
| Viewlog.Filtrate.Input.Vaild   | 当用户输入的筛选条件（**输入**）合法（时间、操作人员、具体操作名称）（**逻辑文件**）时，系统列表显示符合条件的操作记录，若无符合条件的记录则弹出窗口提示无符合条件的记录（**输出**） |
| Viewlog.Filtrate.Input.Invaild | 当输入其他内容（**逻辑文件**）时，系统警告用户筛选条件无效（**输出**）  |
| Viewlog.Filtrate.Input.Time    | 当用户选择时间段进行搜索时（**查询**），系统显示按操作时间顺序显示该时间段主要操作（**输出**） |



### 4.30.总经理管理草稿箱

输入：0
输出：7
查询：8
逻辑文件：6
对外接口：0
功能点测量总数：（4*0+5*7+4*8+10*6+7*0）*（0.65+0.01*49）=144

| 编号                             | 需求描述与度量                                  |
| ------------------------------ | ---------------------------------------- |
| ManagerDraftBackup.Show        | 当用户进入草稿箱（**查询**）时，系统按照保存时间列表显示所有促销策略信息的草稿（包括修改时间、促销策略分类）（**输出**） |
| ManagerDraftBackup.Show.Select | 当用户点击一条草稿（**查询**）时，系统显示保存的该促销策略的所有信息，参见ManagerDraftBackup.Detail |
| ManagerDraftBackup.Show.Delete | 当用户删除选中的草稿（**查询**）时，系统弹出窗口询问是否确认删除，并显示选中草稿的简略信息（**输出**），参见ManagerDraftBackup.Delete |



| 编号                                     | 需求描述与度量                                  |
| -------------------------------------- | ---------------------------------------- |
| ManagerDraftBackup.Detail.Cancel       | 当用户取消查看（**查询**）时，系统返回草稿箱界面。              |
| ManagerDraftBackup.Detail.Edit         | 当用户选择编辑（**查询**）时，系统应尝试读取后，删除备份信息（**逻辑文件**）。 |
| ManagerDraftBackup.Detail.Edit.Success | 当用户选择编辑时，若系统成功读取草稿，显示相应促销策略制定界面（**输出**），恢复备份，删除在草稿箱中的草稿（**逻辑文件**），则参见Promotion.Input |
| ManagerDraftBackup.Detail.Edit.Failure | 当用户选择编辑时，若系统在读取备份单据时出现错误，或者读取后删除失败时，系统应弹出窗口提示相应的错误（**输出**），用户确认后系统返回草稿箱界面。 |



| 编号                                       | 需求描述与度量                                  |
| ---------------------------------------- | ---------------------------------------- |
| ManagerDraftBackup.Delete.Detail         | 当用户选择一条备份（**查询**）时，系统弹出窗口显示该备份的详细信息（**输出**） |
| ManagerDraftBackup.Delete.Detail.Back    | 当用户确认草稿详情（**查询**）时，系统返回询问是否确认删除界面。       |
| ManagerDraftBackup.Delete.Confirmed      | 当用户确认删除选中的所有草稿（**查询**）时，系统应删除这些草稿（**逻辑文件**） |
| ManagerDraftBackup.Delete.Confirmed.Success | 如果系统删除成功（**逻辑文件**），则弹出窗口提示删除成功（**输出**），用户确认信息后，系统返回草稿箱界面 |
| ManagerDraftBackup.Delete.Confirmed.Failure | 如果系统删除失败（**逻辑文件**），则弹出窗口提示删除失败（**输出**），用户确认信息后，系统返回草稿箱界面 |
| ManagerDraftBackup.Delete.Confirmed.Log  | 当用户确认删除草稿时，无论操作是否成功，系统都在日志中记录删除操作（**逻辑文件**） |
